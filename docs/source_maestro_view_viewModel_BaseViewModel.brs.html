<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>source/maestro/view/viewModel/BaseViewModel.brs - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-BaseObservable.html">BaseObservable</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-BaseObservable.html#BaseObservable">BaseObservable</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-BaseObservable.html#bindField">bindField</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-BaseObservable.html#notifyBinding">notifyBinding</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-BaseObservable.html#observeField">observeField</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-BaseObservable.html#setContext">setContext</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-BaseObservable.html#setField">setField</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-BaseObservable.html#unbindField">unbindField</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-BaseScreen.html">BaseScreen</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-BaseView.html">BaseView</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-FocusMixin.html">FocusMixin</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-KeyMixin.html">KeyMixin</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-MaestroUtils.html">MaestroUtils</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-MTU%2520MaestroThreadUtils.html">MTU MaestroThreadUtils</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-ObservableMixin.html">ObservableMixin</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ObservableMixin.html#.bindFieldTwoWay">bindFieldTwoWay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ObservableMixin.html#.bindingCallback">bindingCallback</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ObservableMixin.html#.bindNodeField">bindNodeField</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ObservableMixin.html#.bindObservableField">bindObservableField</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ObservableMixin.html#.checkValidInputs">checkValidInputs</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ObservableMixin.html#.cleanup">cleanup</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ObservableMixin.html#.createBindingProperties">createBindingProperties</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ObservableMixin.html#.observeField">observeField</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ObservableMixin.html#.observerCallback">observerCallback</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ObservableMixin.html#.registerObservable">registerObservable</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ObservableMixin.html#.unbindFieldTwoWay">unbindFieldTwoWay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ObservableMixin.html#.unbindNodeField">unbindNodeField</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ObservableMixin.html#.unbindObservableField">unbindObservableField</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ObservableMixin.html#.unobserveField">unobserveField</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-ObservableMixin.html#.unregisterObservable">unregisterObservable</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-ViewModelMixin.html">ViewModelMixin</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">source/maestro/view/viewModel/BaseViewModel.brs</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'import "../../observable/BaseObservable.bs"
'import "pkg:/source/rLog/rLogMixin.brs"





' /**
'  * @member new
'  * @memberof module:BaseViewModel
'  * @instance
'  * @description contsructor for a view model.
'  *              this class contains the common functions to assist in vm management
'  *               - KeyMixin integration points
'  *               - FocusMixin integration points
'  *               - wrappers for key navigation methods
'  * @param {string} name to use in logs, etc
'  */

 function MBVM_new(name = "BaseViewModel")
  m.super()
  m.name = name
  registerLogger(name, true, m)
end function







'+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
'++ public API
'+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

 function MBVM_initialize()
  m.logMethod("initialize")
  if  MU_isFunction(m._initialize)
    m._initialize()
  end if
  m.state = "initialized"
end function

'+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
'++ KEY HANDLING
'+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

 function MBVM_onKeyEvent(key as string, press as boolean) as boolean
  result = false
  if press
    if  MU_isFunction(m.isAnyKeyPressLocked) and m.isAnyKeyPressLocked()
      return true
    end if
    
    if key = "down" and  MU_isFunction(m.onKeyPressDown)
      result = m.onKeyPressDown()
    else if key = "up" and  MU_isFunction(m.onKeyPressUp)
      result = m.onKeyPressUp()
    else if key = "left" and  MU_isFunction(m.onKeyPressLeft)
      result = m.onKeyPressLeft()
    else if key = "right" and  MU_isFunction(m.onKeyPressRight)
      result = m.onKeyPressRight()
    else if key = "OK" and  MU_isFunction(m.onKeyPressOK)
      result = m.onKeyPressOK()
    else if key = "back" and  MU_isFunction(m.onKeyPressBack)
      result = m.onKeyPressBack()
    else if key = "options" and  MU_isFunction(m.onKeyPressOption)
      result = m.onKeyPressOption()
    else if key = "play" and  MU_isFunction(m.onKeyPressPlay)
      result = m.onKeyPressPlay()
    end if
  else
    result = false
  end if
  
  if (result = invalid)
    result = false
  end if
  
  if result = false and  MU_isFunction(m.isCapturingAnyKeyPress)
    result = m.isCapturingAnyKeyPress(key, press)
  end if
  
  return result
end function

'+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
'++ nav support
'+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
'Note the following methods are proxies to facilitate testing.
'All of them will call out to the top level scope

 function MBVM_push(view)
  push(view)
end function

 function MBVM_pop() as object
  return(pop())
end function

 function MBVM_resetNavControllerToRoot()
  resetNavControllerToRoot()
end function

 function MBVM_resetNavController(newFirstScreen = invalid, endIndex = -1)
  resetNavController(newFirstScreen, endIndex)
end function





      function __BaseViewModel_builder()
      instance = __BaseObservable_builder()
      BaseViewModel_instance = {
        __className: "BaseViewModel"
        

         __BaseViewModel: MBVM_new
        

        initialize: MBVM_initialize
        onKeyEvent: MBVM_onKeyEvent
        push: MBVM_push
        pop: MBVM_pop
        resetNavControllerToRoot: MBVM_resetNavControllerToRoot
        resetNavController: MBVM_resetNavController
        

        state: "none"
        focusId: invalid
        name: ""
        

        __viewModel: true
        

      }
      instance.append(BaseViewModel_instance)
      return instance
      end function
    


      function BaseViewModel(name = "BaseViewModel")
        instance = __BaseViewModel_builder()
        instance.__BaseViewModel(name)
        return instance
      end function
    </code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Oct 24 2019 11:17:23 GMT-0500 (-05) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
